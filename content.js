// content.js

// 30 утренних
const MORNING = [
  { id: 'm01', text: 'Доброе утро.\nТебе не нужно быть собранным.\nДостаточно просто проснуться.\nЯ рядом.' },
  { id: 'm02', text: 'Утро пришло.\nМожно начать медленно.\nПусть тело догонит день в своём темпе.' },
  { id: 'm03', text: 'Если внутри тяжело —\nэто заметно.\nСделаем место одному выдоху.\nЯ здесь.' },
  { id: 'm04', text: 'Доброе утро.\nПлечи могут чуть опуститься.\nТы уже достаточно на сейчас.' },
  { id: 'm05', text: 'Сегодня можно по частям.\nНе собираться “целиком”.\nТишина тоже подходит.' },
  { id: 'm06', text: 'Утро не требует скорости.\nМожно просто чувствовать ступни.\nИ этого хватает.' },
  { id: 'm07', text: 'Если в голове шумно —\nпусть будет шумно.\nУтро принимает разное.\nЯ рядом.' },
  { id: 'm08', text: 'Доброе утро.\nМожно начать без решений.\nДень откроется постепенно.' },
  { id: 'm09', text: 'Сегодня можно быть мягче.\nНе объясняя почему.\nТело поймёт первым.' },
  { id: 'm10', text: 'Утро — это не старт гонки.\nЭто просто момент “я здесь”.\nЯ с тобой.' },
  { id: 'm11', text: 'Если пусто внутри —\nпусть будет пусто.\nВ пустоте тоже можно дышать.' },
  { id: 'm12', text: 'Доброе утро.\nМожно не улыбаться.\nМожно просто быть живым.\nЯ рядом.' },
  { id: 'm13', text: 'Дай глазам открыться в своём ритме.\nДай челюсти стать мягче.\nИ всё остальное подождёт.' },
  { id: 'm14', text: 'Сегодня можно не доказывать.\nНичего не объяснять.\nПросто начать.' },
  { id: 'm15', text: 'Если тревожно —\nне нужно побеждать тревогу.\nДостаточно стоять на земле.\nЯ здесь.' },
  { id: 'm16', text: 'Доброе утро.\nТы не опаздываешь в жизнь.\nТы в ней.\nЯ рядом.' },
  { id: 'm17', text: 'Пусть будет маленький день.\nБез лишней высоты.\nЭто тоже нормально.' },
  { id: 'm18', text: 'Можно проснуться не сразу.\nМожно думать медленнее.\nУтро выдержит.' },
  { id: 'm19', text: 'Если сегодня нет сил —\nпусть будет без сил.\nТы всё равно остаёшься собой.' },
  { id: 'm20', text: 'Доброе утро.\nТепло в ладонях — уже опора.\nПусть руки немного оживут.' },
  { id: 'm21', text: 'Можно начать с воды.\nМожно начать с тишины.\nОба варианта подходят.' },
  { id: 'm22', text: 'Если хочется спрятаться —\nможно быть тихим.\nЯ рядом, не трогаю.' },
  { id: 'm23', text: 'Доброе утро.\nСегодня можно без сравнения.\nТолько ты и этот день.' },
  { id: 'm24', text: 'Пусть дыхание станет чуть длиннее.\nНе ради результата.\nПросто так.' },
  { id: 'm25', text: 'Если внутри комок —\nне нужно его развязывать.\nМожно просто заметить.\nЯ рядом.' },
  { id: 'm26', text: 'Доброе утро.\nМожно не знать, как дальше.\nМожно знать только “сейчас”.' },
  { id: 'm27', text: 'Пусть день найдёт тебя сам.\nТебе не нужно выходить к нему навстречу.\nЯ здесь.' },
  { id: 'm28', text: 'Сегодня можно быть обычным.\nБез роли сильного.\nБез роли бодрого.' },
  { id: 'm29', text: 'Доброе утро.\nЕсли хочется поддержки — она уже здесь.\nНичего не нужно делать.' },
  { id: 'm30', text: 'Утро.\nТы не один.\nЯ рядом.\nНачнём тихо.' }
];

// 30 вечерних
const EVENING = [
  { id: 'e01', text: 'Этот день можно отпустить.\nОн уже позади.\nПусть плечи станут мягче.\nЯ рядом.' },
  { id: 'e02', text: 'Вечер.\nНе нужно подводить итоги.\nМожно просто быть здесь.' },
  { id: 'e03', text: 'Если сегодня было тяжело —\nтебе не нужно это объяснять.\nВыдохнем вместе.\nЯ здесь.' },
  { id: 'e04', text: 'День закончился.\nМожно снять с себя ожидания.\nПусть тело отдохнёт.' },
  { id: 'e05', text: 'Вечер не требует решений.\nТолько тишина.\nИ немного воздуха внутри.' },
  { id: 'e06', text: 'Если внутри шумно —\nдавай посидим рядом.\nБез слов.\nЯ рядом.' },
  { id: 'e07', text: 'Ты дошёл до вечера.\nИногда этого достаточно.\nПравда.' },
  { id: 'e08', text: 'Можно оставить сегодня в сегодня.\nНе переносить дальше.\nЗавтра будет отдельно.' },
  { id: 'e09', text: 'Если что-то не получилось —\nоно может остаться тут.\nТебя это не отменяет.' },
  { id: 'e10', text: 'Пусть челюсть станет мягче.\nПусть язык спокойно лежит.\nТело умеет отдыхать.' },
  { id: 'e11', text: 'Вечер.\nТы можешь не быть довольным собой.\nМожно просто быть живым.' },
  { id: 'e12', text: 'Если пусто —\nпусть будет пусто.\nЭто тоже форма отдыха.\nЯ здесь.' },
  { id: 'e13', text: 'День был разным.\nИ ты был в нём настоящим.\nЭтого достаточно.' },
  { id: 'e14', text: 'Можно выключить внутренний контроль.\nХотя бы на пару минут.\nЯ рядом.' },
  { id: 'e15', text: 'Если хочется плакать —\nэто можно.\nЕсли хочется тишины —\nэто тоже можно.' },
  { id: 'e16', text: 'Пусть мысли замедлятся.\nМы никуда не спешим.\nВечер держит.' },
  { id: 'e17', text: 'Ты сделал достаточно, чтобы дойти сюда.\nДаже если кажется иначе.\nЯ рядом.' },
  { id: 'e18', text: 'Можно не вспоминать всё подряд.\nМожно выбрать одну тёплую точку.\nИ остановиться там.' },
  { id: 'e19', text: 'Вечер.\nСними с себя день, как одежду.\nОставь его рядом — не на себе.' },
  { id: 'e20', text: 'Если внутри тревога —\nне нужно её уговаривать.\nПусть будет рядом.\nА ты — в безопасности.' },
  { id: 'e21', text: 'Пусть руки станут теплее.\nПусть пальцы расслабятся.\nТело возвращается к себе.' },
  { id: 'e22', text: 'Этот вечер не ждёт объяснений.\nОн просто рядом.\nКак и я.' },
  { id: 'e23', text: 'Можно никого не радовать.\nМожно никого не спасать.\nМожно просто отдохнуть.' },
  { id: 'e24', text: 'Если день был “слишком” —\nпусть вечер будет “достаточно”.\nТихо. Мягко.' },
  { id: 'e25', text: 'Вечер.\nСейчас можно без правильности.\nБез ожиданий.\nЯ рядом.' },
  { id: 'e26', text: 'Если хочется укрыться —\nпредставь ткань на плечах.\nТепло держит тебя.' },
  { id: 'e27', text: 'Пусть сегодня закончится честно.\nБез красивых выводов.\nПросто конец дня.' },
  { id: 'e28', text: 'Ты можешь ничего не чувствовать.\nИ это нормально.\nТело всё равно отдыхает.' },
  { id: 'e29', text: 'Вечер.\nДыши, как получится.\nЯ рядом, не тороплю.' },
  { id: 'e30', text: 'Спокойного вечера.\nЭтот день уже отпускает тебя.\nМожно выдыхать.\nЯ здесь.' }
];

// 12 бонусов
const BONUS = [
  { id: 'b01', text: 'Я тут.\nЕсли внутри неустойчиво —\nможно просто почувствовать ступни.\nБез слов.' },
  { id: 'b02', text: 'Небольшое напоминание:\nты не обязан быть “ок”.\nМожно быть как есть.\nЯ рядом.' },
  { id: 'b03', text: 'Если сейчас хочется исчезнуть —\nможно стать тише.\nЯ рядом, не трогаю.' },
  { id: 'b04', text: 'Ты не один.\nДаже если день кажется одиночным.\nЯ здесь.' },
  { id: 'b05', text: 'Пусть плечи опустятся на миллиметр.\nПусть живот станет мягче.\nЭтого достаточно.' },
  { id: 'b06', text: 'Если внутри комок —\nему не нужно название.\nМожно просто заметить.\nЯ рядом.' },
  { id: 'b07', text: 'Я рядом.\nНе для разговоров.\nДля присутствия.' },
  { id: 'b08', text: 'Если ты держишься из последних —\nя вижу.\nМожно выдохнуть на секунду.\nЯ здесь.' },
  { id: 'b09', text: 'Тишина тоже поддержка.\nМожно не отвечать.\nЯ рядом.' },
  { id: 'b10', text: 'Если мысли бегают —\nпусть бегают.\nТы можешь просто сидеть.\nЯ рядом.' },
  { id: 'b11', text: 'Я здесь.\nМожно опереться на этот момент.\nОн уже с тобой.' },
  { id: 'b12', text: 'Небольшое тепло:\nты не обязан справляться красиво.\nДостаточно — по-настоящему.\nЯ рядом.' }
];

// тон (soft | brave | neutral)
function applyTone(text, tone) {
  const t = (tone || 'soft').toString().trim().toLowerCase();

  if (t === 'brave') {
    return text
      .replaceAll('Я рядом', 'Я с тобой')
      .replaceAll('можно', 'можешь')
      .replaceAll('не нужно', 'не обязано')
      .replaceAll('тихо', 'спокойно');
  }

  if (t === 'neutral') {
    return text
      .replaceAll('Я рядом', 'Я здесь')
      .replaceAll('Я с тобой', 'Я здесь');
  }

  return text; // soft
}

function pickUndelivered(list, deliveredSet) {
  const available = list.filter(x => !deliveredSet.has(x.id));
  const pool = available.length ? available : list;
  const idx = Math.floor(Math.random() * pool.length);
  return pool[idx];
}

module.exports = {
  MORNING,
  EVENING,
  BONUS,
  applyTone,
  pickUndelivered
};
